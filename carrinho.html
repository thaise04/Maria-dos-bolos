<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carrinho - Maria dos Bolos</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
<h1>üõí Seu Carrinho</h1>
<div class="lista-itens" id="lista"></div>
<div class="total" id="total"></div>

<div class="acoes">
    <button class="btn-principal" onclick="finalizar()">Finalizar no WhatsApp</button>
    <button class="btn-principal" onclick="limpar()">Limpar</button>
    <a href="index.html"><button>Voltar</button></a>
</div>
</div>

<script>
let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

function atualizarCarrinho(){
    const lista = document.getElementById("lista");
    const totalDiv = document.getElementById("total");
    lista.innerHTML = "";
    let total = 0;

    if(carrinho.length===0){
        lista.innerHTML = `<div class="vazio">Seu carrinho est√° vazio üõçÔ∏è</div>`;
        totalDiv.innerText = "";
        return;
    }

    carrinho.forEach((item,index)=>{
        lista.innerHTML += `
        <div class="item">
            <span>${item.nome} - R$ ${item.valor.toFixed(2)}</span>
            <button class="remover" onclick="remover(${index})">‚ùå</button>
        </div>`;
        total += item.valor;
    });

    totalDiv.innerText = "Total: R$ " + total.toFixed(2);
}

function remover(index){
    carrinho.splice(index,1);
    localStorage.setItem("carrinho",JSON.stringify(carrinho));
    atualizarCarrinho();
}

function limpar(){
    carrinho=[];
    localStorage.removeItem("carrinho");
    atualizarCarrinho();
}

function finalizar(){
    if(carrinho.length===0){alert("Seu carrinho est√° vazio!"); return;}
    let mensagem = "Ol√°, quero pedir:\n";
    let total=0;
    carrinho.forEach(item=>{
        mensagem+="- "+item.nome+" (R$ "+item.valor.toFixed(2)+")\n";
        total+=item.valor;
    });
    mensagem+="\nTotal: R$ "+total.toFixed(2);
    window.open("https://wa.me/5551993702954?text="+encodeURIComponent(mensagem));
}

atualizarCarrinho();
</script>

</body>
</html>

